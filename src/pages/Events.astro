---
//@ts-nocheck
import { late } from "astro:schema";
import EventCard from "../components/EventCard.astro";
import SelectButton from "../components/SelectButton.astro";
import Layout from "../layouts/Layout.astro";

const url = "https://zyxwycthnsawqveghsdr.supabase.co/rest/v1/events";
const key =
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp5eHd5Y3RobnNhd3F2ZWdoc2RyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzNDI1MDcsImV4cCI6MjA2MzkxODUwN30.oKnpJzXhTYqQFPO7ebhUAXa2BuuhEH7Mxzho0VghZeI";

const options = {
  headers: {
    apikey: key,
  },
};

const data = await fetch(url, options).then((res) => {
  return res.json();
});

console.log(data);
console.log("oirjgwjio");

const formatDate = (dateString) =>
  new Date(dateString).toLocaleDateString(undefined, {
    year: "numeric",
    month: "long",
    day: "numeric",
  });
console.log(formatDate(data[0].event_date));
---

<Layout>
  <ul class="responsiveGrid">
    {data.map((product) => <EventCard {product} />)}
  </ul>
</Layout>

<style>
  .responsiveGrid {
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  }
</style>
